<app-header></app-header>



<div class="container-fluid">
  <div class=" m-5 p-5">
    <div class="search-results" infinite-scroll (scrolled)="onScrollDown($event)">
     
    <div class="container">
      <div class="row">
        <div class="col-lg-8">
          <div class="card " *ngFor="let fa of feedArr.feeds">

            <div class="header">
              <ngx-skeleton-loader *ngIf="!contentLoaded" [theme]="{
                      width: '350px',
                      'border-radius': '0',
                      height: '30px',
                      'margin-bottom': '10px'
                    }"></ngx-skeleton-loader>
              <h5 *ngIf="contentLoaded" class="card-title">{{fa.caption}}</h5>
            </div>
            <ngx-skeleton-loader *ngIf="!contentLoaded" [theme]="{
                    width: '350px',
                    'border-radius': '0',
                    height: '170px',
                    'margin-bottom': '10px'
                  }"></ngx-skeleton-loader>
            <img *ngIf="contentLoaded" src="http://localhost:8080/{{fa.photo}}" class="card-img-top" alt="...">
            <div class="card-body">
              <ngx-skeleton-loader *ngIf="!contentLoaded" [theme]="{
                    width: '350px',
                    'border-radius': '0',
                    height: '70px',
                    'margin-bottom': '10px'
                  }"></ngx-skeleton-loader>
              <div *ngIf="contentLoaded" class="d-flex">

                <i class="fa fa-heart fa-2x" id="heart" style="color:red" aria-hidden="true" (click)="onLike(fa)"><span
                    class="badge badge-secondary">{{fa.like.length}}</span></i>
                <i class="fa fa-comment fa-2x" aria-hidden="true" (click)="show==false?show=true:show=false"><span
                    class="badge badge-secondary">{{fa.comment.length}}</span></i>

                <form #frm="ngForm">
                  <input type="text" [(ngModel)]="your_comment" name="your_comment" class="comment"
                    placeholder="    write  something  here..">
                  <i (click)="onComment(fa)" class="fa fa-arrow-circle-o-right pull-right fa-2x" aria-hidden="true"></i>

                </form>

              </div>
              <div *ngIf="show" class="allComment">

                <ng-container *ngFor="let com of fa.comment">
                  <div class="d-flex">

                    <ng-container *ngFor="let au of allUser">
                      <ngx-avatar *ngIf="com.userId==au._id" bgColor="orangered" name={{au.firstName+au.lastName}}
                        size="30"></ngx-avatar>

                    </ng-container>
                    <p style="margin-left: 10px;">{{com.comment}}</p>
                  </div>
                </ng-container>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>


    <i class="fas fa-plus-circle pull-right" (click)="basicModal.show()" mdbWavesEffect>
      <p class="ap">Add Post</p>
    </i>
    <div mdbModal #basicModal="mdbModal" class="modal fade right" tabindex="-1" role="dialog"
      aria-labelledby="myBasicModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-side modal-top-right " role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title w-100" id="myModalLabel">Create New Post</h4>
          </div>
          <div class="modal-body">

            <form #f="ngForm">
              <label>Add Image:</label><br>
              <br>
              <input type="file" name="files" accept="image/*" (change)="onFileChanged($event)">
              <br>

              <label>Add Caption:</label><br><br>
              <textarea name="caption" [(ngModel)]="your_new_name" id="cap" cols="25" rows="2"
                placeholder="write something here..."></textarea>

              <br>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" mdbBtn color="danger" class="waves-light" aria-label="Close"
              (click)="basicModal.hide()" mdbWavesEffect>Close</button>
            <button type="button" mdbBtn color="primary" class="relative waves-light" (click)="onSubmit()"
              mdbWavesEffect>Save!</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>